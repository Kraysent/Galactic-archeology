{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "IOConfigSchema": {
      "properties": {
        "filenames": {
          "title": "filenames",
          "type": "array",
          "description": "List of filenames. In case of csv file they will be stacked together, in case of fits only the first one will be taken and the rest will be ignored.",
          "items": {
            "title": "filenames",
            "type": "string"
          }
        },
        "format": {
          "title": "format",
          "type": "string",
          "description": "Format of the input file. Can be 'csv' or 'fits'."
        }
      },
      "type": "object",
      "required": [
        "filenames",
        "format"
      ],
      "additionalProperties": false
    },
    "IntegratorSchema": {
      "properties": {
        "args": {
          "title": "args",
          "type": "object",
          "description": "Arguments that would be passed into the constructur of the integrator.",
          "additionalProperties": {}
        },
        "name": {
          "title": "name",
          "type": "string",
          "description": "Name of the integrator."
        }
      },
      "type": "object",
      "required": [
        "args",
        "name"
      ],
      "additionalProperties": false
    },
    "LoggerConfigSchema": {
      "properties": {
        "datefmt": {
          "title": "datefmt",
          "type": "string",
          "description": "Simple strftime() format of the date."
        },
        "filename": {
          "title": "filename",
          "type": "string",
          "description": "Filename where the logs would be duplicated. If left empty, logs would be passed into stdout."
        }
      },
      "type": "object",
      "additionalProperties": false
    },
    "LogParamsSchema": {
      "properties": {
        "logger_id": {
          "title": "logger_id",
          "type": "string",
          "description": "ID of logger."
        },
        "point_id": {
          "title": "point_id",
          "type": "integer",
          "description": "ID of particle from the model."
        }
      },
      "type": "object",
      "required": [
        "logger_id",
        "point_id"
      ],
      "additionalProperties": false
    },
    "TasksConfigSchema": {
      "properties": {
        "actions_after": {
          "title": "actions_after",
          "type": "array",
          "description": "List of actions that would run some function on every single result of the task.",
          "items": {
            "title": "actions_after",
            "type": "object",
            "additionalProperties": {}
          }
        },
        "actions_before": {
          "title": "actions_before",
          "type": "array",
          "description": "List of actions that would run some function on a given snapshot before running the task.",
          "items": {
            "title": "actions_before",
            "type": "object",
            "additionalProperties": {}
          }
        },
        "args": {
          "title": "args",
          "type": "object",
          "description": "Arguments to the constructor of the task.",
          "additionalProperties": {}
        },
        "name": {
          "title": "name",
          "type": "string",
          "description": "Name of the task."
        }
      },
      "type": "object",
      "required": [
        "name"
      ],
      "additionalProperties": false
    },
    "VisualizerConfigSchema": {
      "properties": {
        "figsize": {
          "title": "figsize",
          "type": "array",
          "description": "Figure size in inches.",
          "items": {
            "title": "figsize",
            "type": "integer"
          }
        },
        "output_dir": {
          "title": "output_dir",
          "type": "string",
          "description": "Output directiry where the images would be saved."
        },
        "panels": {
          "title": "panels",
          "type": "array",
          "description": "List of panels, their layouts and properties.",
          "items": {
            "type": "object",
            "$ref": "#/definitions/PanelSchema"
          }
        },
        "pic_filename": {
          "title": "pic_filename",
          "type": "string",
          "description": "Pictures will be saved in output_dir with this filename. {i} is iteration number."
        },
        "title": {
          "title": "title",
          "type": "string",
          "description": "Title template. Use {time} to get time in Myr. One can use standart python formatters to format number of digits, rounding, etc."
        }
      },
      "type": "object",
      "required": [
        "output_dir",
        "panels"
      ],
      "additionalProperties": false
    },
    "PanelSchema": {
      "properties": {
        "coords": {
          "title": "coords",
          "type": "array",
          "description": "Position and size of the graph in form of [x, y, width, height]. Coordinates are counted from the left bottom of the picture.",
          "items": {
            "title": "coords",
            "type": "number",
            "format": "float"
          }
        },
        "id": {
          "title": "id",
          "type": "string",
          "description": "Id of the panel. Should be unique."
        },
        "params": {
          "type": "object",
          "$ref": "#/definitions/PlotParametersSchema",
          "description": "Parameters of the graph box. They should be given the same names as ones in matplotlib.pyplot (and proper values) as most of them are just passed along to it."
        }
      },
      "type": "object",
      "required": [
        "id"
      ],
      "additionalProperties": false
    },
    "PlotParametersSchema": {
      "properties": {
        "basex": {
          "title": "basex",
          "type": "integer"
        },
        "basey": {
          "title": "basey",
          "type": "integer"
        },
        "grid": {
          "title": "grid",
          "type": "boolean"
        },
        "ticks_direction": {
          "title": "ticks_direction",
          "type": "string"
        },
        "title": {
          "title": "title",
          "type": "string"
        },
        "xlabel": {
          "title": "xlabel",
          "type": "string"
        },
        "xlim": {
          "title": "xlim",
          "type": "array",
          "items": {
            "title": "xlim",
            "type": "number",
            "format": "float"
          }
        },
        "xscale": {
          "title": "xscale",
          "type": "string"
        },
        "xticks": {
          "title": "xticks",
          "type": "array",
          "items": {
            "title": "xticks",
            "type": "number",
            "format": "float"
          }
        },
        "ylabel": {
          "title": "ylabel",
          "type": "string"
        },
        "ylim": {
          "title": "ylim",
          "type": "array",
          "items": {
            "title": "ylim",
            "type": "number",
            "format": "float"
          }
        },
        "yscale": {
          "title": "yscale",
          "type": "string"
        },
        "yticks": {
          "title": "yticks",
          "type": "array",
          "items": {
            "title": "yticks",
            "type": "number",
            "format": "float"
          }
        }
      },
      "type": "object",
      "additionalProperties": false
    },
    "IntegrationConfigSchema": {
      "properties": {
        "input_file": {
          "type": "object",
          "$ref": "#/definitions/IOConfigSchema",
          "description": "Parameters of input file: its format and path."
        },
        "integrator": {
          "type": "object",
          "$ref": "#/definitions/IntegratorSchema",
          "description": "Object that stores infromation about the integration algorithm."
        },
        "logging": {
          "type": "object",
          "$ref": "#/definitions/LoggerConfigSchema",
          "description": "This field describes logging configuration."
        },
        "logs": {
          "title": "logs",
          "type": "array",
          "description": "List of particles which parameters would be written to log file.",
          "items": {
            "type": "object",
            "$ref": "#/definitions/LogParamsSchema"
          }
        },
        "model_time": {
          "title": "model_time",
          "type": "array",
          "description": "Time until which model would be integrated. In future custom conditition is planned to be applied."
        },
        "output_file": {
          "title": "output_file",
          "type": "string",
          "description": "Path to file where output model would be saved."
        },
        "overwrite": {
          "title": "overwrite",
          "type": "boolean",
          "description": "Flag that shows whether to overwrite model if it already exists on given filepath."
        },
        "snapshot_interval": {
          "title": "snapshot_interval",
          "type": "integer",
          "description": "Interval between to consecutive snapshots to write to output file."
        },
        "tasks": {
          "title": "tasks",
          "type": "array",
          "description": "This field describes list of tasks. Each task is a class that has run(...) method that processes Snapshot and returns some data.",
          "items": {
            "type": "object",
            "$ref": "#/definitions/TasksConfigSchema"
          }
        },
        "visualizer": {
          "type": "object",
          "$ref": "#/definitions/VisualizerConfigSchema",
          "description": "Visualizer is responsible for the matplotlib's plots, their layout and format of the data. This fields describes layout; format of the data is specified inside tasks."
        }
      },
      "type": "object",
      "required": [
        "input_file",
        "integrator",
        "model_time",
        "output_file"
      ],
      "additionalProperties": true
    }
  },
  "$ref": "#/definitions/IntegrationConfigSchema",
  "title": "Integration config schema",
  "description": "Schema for integration configuration file for OMTool."
}